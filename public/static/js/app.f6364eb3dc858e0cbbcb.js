webpackJsonp([1],{23:function(e,t,a){"use strict";var n=a(2),l=a(98),i=a(94),s=a.n(i);n.default.use(l.a),t.a=new l.a({routes:[{path:"/",name:"conf",component:s.a}]})},36:function(e,t){},37:function(e,t){},38:function(e,t){},39:function(e,t){},40:function(e,t){},41:function(e,t){},42:function(e,t){},43:function(e,t){},44:function(e,t){},45:function(e,t){},46:function(e,t){},47:function(e,t){},48:function(e,t){},49:function(e,t){},50:function(e,t,a){function n(e){a(91)}var l=a(18)(a(73),a(95),n,null,null);e.exports=l.exports},72:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(42),l=(a.n(n),a(29)),i=a.n(l),s=a(48),r=(a.n(s),a(34)),o=a.n(r),u=a(39),c=(a.n(u),a(26)),m=a.n(c),d=a(49),f=(a.n(d),a(35)),p=a.n(f),v=a(46),b=(a.n(v),a(32)),g=a.n(b),_=a(47),y=(a.n(_),a(33)),h=a.n(y),F=a(43),x=(a.n(F),a(9)),w=a.n(x),S=a(40),k=(a.n(S),a(27)),M=a.n(k),j=a(41),q=(a.n(j),a(28)),R=a.n(q),T=a(44),V=(a.n(T),a(30)),$=a.n(V),O=a(38),P=(a.n(O),a(25)),z=a.n(P),A=a(37),C=(a.n(A),a(24)),D=a.n(C),E=a(45),H=(a.n(E),a(36)),L=(a.n(H),a(31)),J=a.n(L),W=a(2),X=a(50),B=a.n(X),G=a(23);W.default.use(J.a),W.default.use(D.a),W.default.use(z.a),W.default.use($.a),W.default.use(R.a),W.default.use(M.a),W.default.use(w.a),W.default.use(h.a),W.default.use(g.a),W.default.use(p.a),W.default.use(m.a),W.default.use(o.a),W.default.use(i.a),W.default.config.productionTip=!1,new W.default({el:"#app",router:G.a,template:"<App/>",components:{App:B.a}})},73:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},74:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(76),l=a.n(n);t.default={name:"addMailer",data:function(){return{mailForm:{name:"",address:"",time:"",images:[]},rule:{name:[{required:!0,message:"请输入收件人名称",trigger:"submit"}],address:[{required:!0,message:"请输入收件人地址",trigger:"submit"},{type:"email",message:"请输入正确的邮箱格式",trigger:"submit"}],time:[{type:"date",required:!0,message:"请选择时间",trigger:"submit"}]}}},methods:{formatForm:function(e){return e.time&&(e.time=e.time.toLocaleTimeString()),e},initForm:function(){this.mailForm={name:"",address:"",time:"",images:[]}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<300||304===a.status?console.log(a.responseText):console.log("失败"+a.status))},a.open("post","/v1/mail",!0),a.setRequestHeader("Content-Type","application/json"),a.send(l()(t.mailForm)),t.$emit("on-success",t.formatForm(t.mailForm)),t.initForm()})},handleSuccess:function(e,t){var a={file:"",url:"",path:""};console.log(e),a.path=e.path.split("\\").pop(),a.file=t.name,a.url=t.url,console.log(a),this.mailForm.images.push(a)}}}},75:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(93),l=a.n(n);t.default={components:{AddMailer:l.a},name:"conf",data:function(){return{tableData:[],dialogVisible:!1}},methods:{onSuccess:function(e){console.log(e),this.dialogVisible=!1,this.tableData.push(e)}}}},91:function(e,t){},92:function(e,t){},93:function(e,t,a){var n=a(18)(a(74),a(97),null,null,null);e.exports=n.exports},94:function(e,t,a){function n(e){a(92)}var l=a(18)(a(75),a(96),n,null,null);e.exports=l.exports},95:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}},96:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"conf"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("h1",[e._v("my-mailer操作台")]),e._v(" "),a("el-row",{staticStyle:{"padding-bottom":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4,offset:15}},[a("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新建任务")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:18,offset:3}},[a("el-table",{attrs:{border:"",data:e.tableData}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"收件人姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"address",label:"收件人地址","header-align":"left",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-icon",{attrs:{name:"message"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"time",label:"预约发送时间","header-align":"left",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-icon",{attrs:{name:"time"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"images",label:"图片列表"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.images,function(e){return a("el-card",{key:e.url,attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.url}})])})}}])})],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新建任务",visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("add-mailer",{on:{"on-success":e.onSuccess}})],1)],1)},staticRenderFns:[]}},97:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addMailer"}},[a("el-form",{ref:"mailForm",attrs:{labelWidth:"120px",model:e.mailForm,rules:e.rule}},[a("el-form-item",{attrs:{label:"收件人名称",prop:"name"}},[a("el-input",{model:{value:e.mailForm.name,callback:function(t){e.mailForm.name=t},expression:"mailForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收件人地址",prop:"address"}},[a("el-input",{model:{value:e.mailForm.address,callback:function(t){e.mailForm.address=t},expression:"mailForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预约发送时间",prop:"time"}},[a("el-time-picker",{staticStyle:{float:"left"},attrs:{placeholder:"选择发送时间点"},model:{value:e.mailForm.time,callback:function(t){e.mailForm.time=t},expression:"mailForm.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片",prop:"images"}},[a("el-upload",{ref:"upload",staticStyle:{float:"left"},attrs:{action:"http://localhost:3000/v1/upload","on-success":e.handleSuccess,listType:"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),e._v(" "),a("el-button",{staticStyle:{width:"80%"},attrs:{type:"primary",size:"large"},on:{click:function(t){e.submitForm("mailForm")}}},[e._v("\n      创建任务\n    ")])],1)],1)},staticRenderFns:[]}}},[72]);
//# sourceMappingURL=app.f6364eb3dc858e0cbbcb.js.map